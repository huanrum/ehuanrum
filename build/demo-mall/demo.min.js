$ehr("global",function(){return{service:"http://192.168.1.152:8888/mall",update:function(n,e){var i=this;Object.keys(n||{}).forEach(function(e){i[e]=n[e]}),Object.keys(n||{}).forEach(function(e){localStorage["ehuanrum_"+e]=n[e]})},user:localStorage.ehuanrum_user}}),$ehr("http",["global","binding",function(n,e){function i(n,e){var i=Object.keys(e).sort(function(n,e){return/:/.test(e.name)-/:/.test(n.name)}).map(function(i){if(n.indexOf(":"+i)===-1)return i+"="+JSON.parse(e[i]);n=n.replace(":"+i,JSON.parse(e[i]))}).filter(function(n){return!!n}).join("&");if(n.indexOf(":")===-1)return n+(i?"?"+i:"")}return function(t,o){var r=i(t,o),c=e(['<div class="common-dialog-back">','   <div class="common-dialog">',"      <strong [innerHTML]=\"loadMessage + '(' +floor(remaining/2)+ 's)' + index\" [hidden]=\"!remaining\"></strong>",'      <span [hidden]="!!remaining">加载已经超时</span>',"  </div>","</div>"].join(""),{loadMessage:"加载中",index:"...",remaining:60,floor:function(n){return Math.floor(n)}},document.body,function(n){var e=0,i=setInterval(function(){e=(e+1)%16,n.index=Array(e+4).join("."),n.remaining=n.remaining-1,Math.floor(n.remaining)||setTimeout(function(){c.update()},3e3)},500);n.$destroy(function(){clearInterval(i)})});return new Promise(function(e,i){r||i({message:"参数不完整"}),fetch(n.service+r).then(function(n){return c.update(),n.json()},function(n){c.update(),i(n)}).then(function(n){e(n)})})}}]),$ehr("login",["global","binding",function(n,e){var i=['<div class="login-controller">',"   <div>","       <label>UserName</label>",'       <input [value]="username">',"   </div>","   <div>","       <label>Password</label>",'       <input [value]="password">',"   </div>",'<div><button [onclick]="login(username,password)">Login</button></div>',"</div>"].join("");return function(t,o){var r=e(i,{username:o,login:function(e,i){n.update({user:e},{user:e}),r.update(),t()}},document.body)}}]),$ehr("main",["global",function(n){return function(e){n.user?e():$ehr("login").call(this,e,"seto")}}]),window.$ehr("control.my.form",["binding","value","common_dialog",function(n,e,i){return function(i,t,o){var r=t.$extend({},[o]);Object.defineProperty(r,"fields",{configurable:!0,enumerable:!1,get:function(){return Object.keys(e(t,o))}}),n(['   <div class="form-body">','       <div [field:fields] class="form-row" [my.label.value]="'+o+':field">',"       </div>","   </div>"].join(""),r,i)}}]),function(n){"use strict";n("control.my.grid",["binding","value","common_dialog",function(n,e,i){return function(t,o,r){var c=[],l=o.$extend({select:o.select,show:function(n){i('<div [my.form]="item" style="width:20em;"></div>',{title:"展示一条数据",item:n,buttons:{ok:function(){i("提交数据")(this.$close)},cancel:function(){this.$close()}}})}},[r]);Object.defineProperty(l,"columns",{configurable:!0,enumerable:!1,set:function(n){c=n},get:function(){var n=[];return(e(o,r)||[]).forEach(function(e){Object.keys(e).forEach(function(e){n.indexOf(e)===-1&&n.push(e)})}),Object.keys(c).join()!==Object.keys(n).join()&&(l.columns=n),n}}),n(["<div >",'   <div class="table-header">','       <div class="table-row">',"           <div [column:columns] [innerHTML]=\"''+column\" [class]=\"'cell-' + $index\"></div>","       </div>","   </div>",'   <div class="table-body">','       <div [item:items] class="table-row" [ondblclick]="show(item)" [onclick]="select">','           <div [column:columns] [class]="\'cell-\' + $index" [innerHTML]="item[column]"></div>',"       </div>","   </div>","</div>"].join(""),l,t)}}])}(window.$ehr),window.$ehr("control.my.label.value",["binding",function(n){return function(e,i,t){var o=i.$extend({},t.split(":"));n(['   <div class="label-value">','       <label [innerHTML]="field"></label>','       <div [innerHTML]="item[field]"></div>',"   </div>"].join(""),o,e)}}]),function(n){"use strict";n("filter.capitalize",function(){return function(n,e){return e%=n.length,n.slice(0,e)+n[e].toLocaleUpperCase()+n.slice(e+1)}})}(window.$ehr),function(n){"use strict";n("common.dialog",function(){return function(e,i){i=i||{},i.buttons=i.buttons||[],i.$close=function(){t.update()};var t=n("binding")([' <div class="common-dialog-back">','   <div class="common-dialog" [style.background]="background">','       <div class="common-dialog-header">',"           <label>",i.title||"no title","           </label>",'           <a [onclick]="$close">&times;</a>',"       </div>",'       <div class="common-dialog-content">',e,"       </div>",'       <div class="common-dialog-footer">','           <a [btn:buttons] [onclick]="btn" [innerHTML]="btn.name"></a>',"       </div>","   </div>"," </div>"].join(""),i,document.body)}})}(window.$ehr),function(n){"use strict";n("common.page",["global","binding",function(n,e){var i=["<div>",'   <div class="content-header">','        <div class="left">',"           {title} ","        </div>",'        <div class="right" [onclick]="personal">',n.user,"        </div>","   </div>",'   <div class="content-content">',"      {content}","   </div>",'   <div class="content-footer">',"       {footer}","   </div>","</div>"].join("");return function(t,o,r){if("function"==typeof o&&(r=o,o={}),"function"==typeof r&&r(o),"string"==typeof t)Object.keys(o).forEach(function(n){t=t.replace(new RegExp("\\{\\s*"+n+"\\s*\\}","g"),o[n]||"")});else if(r.update){var c=r;r=null,t='<div [my.grid]="items"></div>',c.update(function(n,e){o.items=n,o.page=o.page||{},Object.keys(e||{}).forEach(function(n){o.page[n]=e[n]})})}return o.personal=function(){$ehr("personal")(n.user)},e([i,{title:o.title||"no title",content:t,footer:o.footer}],o,r)}}])}(window.$ehr),function(n){"use strict";n("common.service",["http","functions.event",function(n,e){return function(i){var t={},o=e(),r={pageNumber:1,pageSize:20},c={update:function(n){o.in(n),t.list&&n(t.list,r)},get:function(e){return e&&n(i.url,e).then(function(n){t.list=n.data.list,o.fire(t.list,r)}),t.list},select:function(n){return n&&(t.select=n),t.select}};return c.get(r),c}}])}(window.$ehr),$ehr("router.book.math",["common_page","book_math_service",function(n,e){return function(){return n(null,{title:"Math"},e)}}]),$ehr("book.math.service",["common_service",function(n){return n({url:"/book/math"})}]),$ehr("router.book.story",["common_page","book_story_service",function(n,e){return function(){return n(null,{title:"Story"},e)}}]),$ehr("book.story.service",["common_service",function(n){return n({url:"/book/story"})}]),$ehr("router.home",["common_page",function(n){var e=["<div>{brief}</div>","<br>","<div>{info}</div>","<br>","<hr>","<div>{contact}</div>"].join("");return function(){return n(e,{title:"Home"},function(n){n.brief="这是一个模拟网络商场以及产品管理的项目，里面主要包含用户个人信息，商品展示，购物车等等",n.info=["此项目中主要包含两个分块：商品展示和商品管理。","   商品展示：用户可以浏览所有商品，都可以点击购买，加入购物车，查看相信信息等等。","   商品管理：商场管理人员查看销售情况以及库存信息，分析商品的销售趋势，以便于后期的囤货。","   ","   "].join("<br>"),n.contact="email: <i>huanrum@126.com</i>"})}}]),$ehr("personal",["binding",function(n){var e=["<div>",'   <div [innerHTML]="title"></div>',"   <div [value:item]>",'       <label [innerHTML]="$index"></label>','       <div [innerHTML]="value"></div>',"   </div>","</div>"].join("");return function(i){n(e,function(n){n.title="个人信息",n.item={name:i,email:"huanrum@126.com"}},"personal")}}]);